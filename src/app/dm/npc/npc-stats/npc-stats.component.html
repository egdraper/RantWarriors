<h4>Select Creature</h4>

<mat-form-field>
  <mat-label>Creatures</mat-label>
  <mat-select
    [placeholder]="'Creature'"
    (selectionChange)="onNpcChange($event)"
  >
    <mat-option *ngFor="let npc of npcList" [value]="npc">
      {{ npc }}
    </mat-option>
  </mat-select>
</mat-form-field>

<button mat-button (click)="addNpc()">Add NPC</button>

<mat-tab-group>
    <mat-tab *ngFor="let activeNpc of activeNpcs; let i = index" label="{{ activeNpc.name }}: {{ (activeNpc.currentHitPoints < 1 ? dead : i) }}">     
       <button mat-button (click)="remove(i)">Remove X</button>
        <div class="active-creatures">
          
       <div class="creature-cell" [class.creature-dead]="activeNpc.currentHitPoints <= 0">
         <img src="{{activeNpc.imgUrl}}"> 
        <div class="score-area">
          <div class="ability-score" (click)="rollAbility(activeNpc.abilities.strength, activeNpc)">
            <div class="ability">Str</div>
            <div class="score">{{ activeNpc.abilities.strength}}</div>
          </div>
          <div class="ability-score" (click)="rollAbility(activeNpc.abilities.dexterity, activeNpc)">
            <div class="ability">Dex</div>
            <div class="score">{{ activeNpc.abilities.dexterity}}</div>
          </div>
          <div class="ability-score" (click)="rollAbility(activeNpc.abilities.constitution, activeNpc)">
            <div class="ability">Con</div>
            <div class="score">{{ activeNpc.abilities.constitution}}</div>
          </div>
          <div class="ability-score" (click)="rollAbility(activeNpc.abilities.intelligence, activeNpc)">
            <div class="ability">Int</div>
            <div class="score">{{ activeNpc.abilities.intelligence}}</div>
          </div>
          <div class="ability-score" (click)="rollAbility(activeNpc.abilities.wisdom, activeNpc)">
            <div class="ability">Wis</div>
            <div class="score">{{ activeNpc.abilities.wisdom}}</div>
          </div>
          <div class="ability-score" (click)="rollAbility(activeNpc.abilities.charisma, activeNpc)">
            <div class="ability">Cha</div>
            <div class="score">{{ activeNpc.abilities.charisma}}</div>
          </div>    
          <div class="ability-score">
            <div class="ability"><strong>{{ activeNpc.abilityRoll || 0 }}</strong></div>
          </div>  
             
        </div> 
        <div class="trait-grouping">
          <battle-defense-npc
            [activeNpc]="activeNpc">
          </battle-defense-npc>
        </div>
         
        <div class="trait-grouping">
          <battle-offense-npc
            [activeNpc]="activeNpc">
          </battle-offense-npc>
        </div>
            
          <div class="trait-grouping" *ngIf="activeNpc.immunities.length !== 0 || activeNpc.resistances.length !== 0">
              <h1>Immunities</h1>
              <h4 *ngFor="let immunity of activeNpc.immunities"> {{ immunity }}</h4>
              <hr/>
              <h1>Resistances</h1>
              <h4 *ngFor="let resistance of activeNpc.resistances"> {{ resistance }}</h4>
          </div>

          <div class="trait-grouping" *ngIf="activeNpc.savingThrows.length > 0">
            <h1>Saving Throws</h1>
            <div *ngFor="let savingThrow of activeNpc.savingThrows">
              <h4> {{ savingThrow.ability }}: {{ savingThrow.value }}</h4>
            </div>
        </div>
    </div>
            <span class="stat-numbers">
              <button 
                class="damage-quick-link" 
                mat-button
                (click)="activeNpc.currentHitPoints = activeNpc.currentHitPoints - number"
                *ngFor="let number of [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,20,21,22,23,24,25,26,27,28,29]; let l = index">
                  {{number}}
                </button>
            </span>      
    </div>  
    </mat-tab>
</mat-tab-group>
  